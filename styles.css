:root{
  color-scheme: dark;

  --bg0:#0b1020;
  --bg1:#0e1630;
  --text:#eef2ff;
  --muted:rgba(238,242,255,.72);

  /* Team colors (use everywhere teams appear) */
  --teamA:#7c5cff;     /* violeta */
  --teamB:#25c6d8;     /* celeste */

  --danger:#ff5b75;
  --warning:#ffcc4a;
  --win:#2fe57a;
  --shadow: 0 14px 40px rgba(0,0,0,.35);
  --radius: 16px;
}

*{ box-sizing:border-box; }
html,body{ min-height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue";
  color:var(--text);
  background: transparent;
  position: relative;
}

/* Fixed app background (no "corte" al scrollear) */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background:
    radial-gradient(1200px 700px at 15% 0%, rgba(124,92,255,.18), transparent 60%),
    radial-gradient(900px 600px at 85% 25%, rgba(37,198,216,.12), transparent 62%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  background-repeat: no-repeat;
}


.topbar{
  position:sticky; top:0; z-index:5;
  backdrop-filter: blur(10px);
  background: rgba(10,14,30,.72);
  border-bottom: 1px solid rgba(255,255,255,.08);
  padding: 14px 16px;
  display:flex; gap:14px; align-items:center; justify-content:space-between;
}

.brand{ display:flex; align-items:center; gap:12px; }
.logo-mark{
  width:42px; height:42px; border-radius: 14px;
  display:grid; place-items:center;
  background: linear-gradient(180deg, rgba(124,92,255,.30), rgba(37,198,216,.10));
  border:1px solid rgba(255,255,255,.12);
  box-shadow: var(--shadow);
  font-size:14px;
  font-weight:950;
  letter-spacing:.6px;
}
.brand-title{ font-weight:950; letter-spacing:.2px; }
.brand-sub{ color:var(--muted); font-size:12px; margin-top:2px; }

.tabs{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-start; }
.tab{
  cursor:pointer;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  color: var(--text);
  padding: 9px 12px;
  font-weight:900;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
}
.tab:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.22); }
.tab.is-active{
  background: rgba(124,92,255,.20);
  border-color: rgba(124,92,255,.42);
}
.tab-ghost{
  background: transparent;
  border-color: rgba(255,255,255,.12);
  color: var(--muted);
}

.main{
  max-width: 1100px;
  margin: 16px auto 60px;
  padding: 0 14px;
}

.card{
  border-radius: var(--radius);
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: var(--shadow);
  overflow:hidden;
  padding: 16px;
}

.hidden{ display:none !important; }

.muted{ color: var(--muted); font-weight: 900; }

.row{ display:flex; gap:12px; flex-wrap:wrap; }
.col{ flex:1; min-width: 280px; }
.hr{ height:1px; background: rgba(255,255,255,.09); margin: 14px 0; }

.h1{ font-size:20px; font-weight:950; margin:0 0 10px; }
.h2{ font-size:12px; font-weight:950; color:var(--muted); margin:0 0 8px; text-transform:uppercase; letter-spacing:.8px; }

.input, .select{
  appearance: none;
  -webkit-appearance: none;

  width:100%;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(18,21,39,.92);
  color: var(--text);
  padding: 10px 12px;
  outline:none;
}
.input:focus, .select:focus{
  border-color: rgba(124,92,255,.55);
  box-shadow: 0 0 0 4px rgba(124,92,255,.18);
}

.btn{
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  text-decoration:none;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(18,21,39,.92);
  color: var(--text);
  padding: 10px 12px;
  font-weight:950;
  transition: transform .08s ease, border-color .2s ease, background .2s ease;
}
.btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.22); }
.btn-primary{
  background: rgba(124,92,255,.20);
  border-color: rgba(124,92,255,.42);
}
.btn-danger{
  background: rgba(255,91,117,.14);
  border-color: rgba(255,91,117,.38);
}
.btn-small{ padding: 7px 10px; border-radius: 10px; font-weight:950; font-size:12px; }

.table{
  width:100%;
  border-collapse: collapse;
  overflow:hidden;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
}
.table th, .table td{
  text-align:left;
  padding: 10px 10px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.table th{
  font-size: 12px;
  text-transform:uppercase;
  letter-spacing:.8px;
  color: var(--muted);
}
.table tr:last-child td{ border-bottom:none; }

/* Team labels and accents */
.teamTag{
  display:inline-flex; align-items:center; justify-content:center;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  font-weight:950;
  font-size:12px;
}
.teamTag.teamA{ background: rgba(124,92,255,.16); border-color: rgba(124,92,255,.32); }
.teamTag.teamB{ background: rgba(37,198,216,.14); border-color: rgba(37,198,216,.30); }

.player-chip{
  display:inline-flex; align-items:center; gap:8px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.05);
  color: var(--text);
  cursor:pointer;
  user-select:none;
  font-weight:950;
}
.player-chip[data-team="A"]{ background: rgba(124,92,255,.18); border-color: rgba(124,92,255,.35); }
.player-chip[data-team="B"]{ background: rgba(37,198,216,.14); border-color: rgba(37,198,216,.30); }

.player-item{
  width:100%;
  display:flex; align-items:center; justify-content:space-between;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  cursor:pointer;
  font-weight:950;
  transition: transform .08s ease, border-color .2s ease, background .2s ease;
}
.player-item:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18); }
.pill{
  display:inline-flex;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  font-size: 12px;
  font-weight:950;
  color: rgba(238,242,255,.92);
}
.pill.teamA{ background: rgba(124,92,255,.14); border-color: rgba(124,92,255,.28); }
.pill.teamB{ background: rgba(37,198,216,.12); border-color: rgba(37,198,216,.26); }

.dropzone{
  border-radius: 14px;
  border: 1px dashed rgba(255,255,255,.18);
  background: rgba(255,255,255,.03);
  padding: 10px;
  min-height: 86px;
}
.dropzone.is-over{ box-shadow: 0 0 0 4px rgba(124,92,255,.14); }
.dropzone.teamA{ border-color: rgba(124,92,255,.35); background: rgba(124,92,255,.08); }
.dropzone.teamB{ border-color: rgba(37,198,216,.30); background: rgba(37,198,216,.06); }

.toast{
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(0,0,0,.55);
  border: 1px solid rgba(255,255,255,.12);
  color: var(--text);
  box-shadow: var(--shadow);
  opacity:0;
  pointer-events:none;
  transition: opacity .18s ease, transform .18s ease;
  max-width:min(92vw, 560px);
  text-align:center;
  font-weight:950;
}
.toast.show{ opacity:1; transform: translateX(-50%) translateY(-2px); }

.overlay{
  position:fixed; inset:0;
  display:grid; place-items:center;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(6px);
  z-index: 50;
}
.spinner{
  width: 42px; height: 42px;
  border-radius: 999px;
  border: 4px solid rgba(255,255,255,.20);
  border-top-color: rgba(124,92,255,.90);
  animation: spin 1s linear infinite;
  margin-bottom: 10px;
}
.overlay-text{ color: var(--text); font-weight:950; }
@keyframes spin{ to{ transform: rotate(360deg); } }

/* Nuevo Partido layout */
.newmatch-layout{
  display:grid;
  grid-template-columns: 360px 1fr 1fr;
  gap: 12px;
  align-items: start;
}
@media (max-width: 900px){
  .newmatch-layout{ grid-template-columns: 1fr; }
}
.panel{
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.02);
  padding: 10px;
}
.player-list{
  display:flex;
  flex-direction:column;
  gap:8px;
  max-height: 520px;
  overflow:auto;
  padding-right: 4px;
}
.teams-right{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media (max-width: 900px){
  .teams-right{ grid-template-columns: 1fr; }
}

/* Partidos */
.match-card{
  cursor: pointer;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  padding: 12px;
  margin-bottom: 12px;
}
.match-header{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:flex-start;
  gap:10px;
}
.match-info{ grid-column:2; text-align:center; }
.match-actions{ grid-column:3; justify-self:end; }
.match-info .scoreline, .match-info .match-meta{ text-align:center; }
.scoreline{
  font-weight:950;
  font-size: 18px;
  letter-spacing:.2px;
}
.scoreline .big{
  display:inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.10);
  margin: 0 6px;
}
.scoreline .big.teamA{ background: rgba(124,92,255,.16); border-color: rgba(124,92,255,.28); }
.scoreline .big.teamB{ background: rgba(37,198,216,.12); border-color: rgba(37,198,216,.24); }

.match-meta{ color: var(--muted); font-weight:900; font-size:12px; margin-top:4px; }

.teams-split{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
  margin-top: 12px;
}
@media (max-width: 760px){
  .teams-split{ grid-template-columns: 1fr; }
}

.team-box{
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.02);
  padding: 10px;
}
.team-box.teamA{ background: rgba(124,92,255,.06); border-color: rgba(124,92,255,.20); }
.team-box.teamB{ background: rgba(37,198,216,.05); border-color: rgba(37,198,216,.18); }

.team-title{
  display:flex; align-items:center; justify-content:space-between;
  font-weight:950;
  margin-bottom: 8px;
}
.team-title span{ color: var(--muted); font-size: 12px; font-weight:950; letter-spacing:.8px; text-transform:uppercase; }

.player-row{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 8px 10px;
  margin: 6px 0;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.03);
  cursor:pointer;
  text-align:left;
  font-weight:950;
  transition: transform .08s ease, border-color .2s ease, background .2s ease;
}
.player-row:hover{ border-color: rgba(255,255,255,.20); transform: translateY(-1px); }
.player-row .icons{ display:flex; align-items:center; gap:8px; }
.icon-pill{
  display:inline-flex; align-items:center;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  font-size: 12px;
  font-weight:950;
  color: rgba(238,242,255,.92);
}
.player-row.has-votes{ background: rgba(255,204,74,.08); border-color: rgba(255,204,74,.22); }

.detail-box{
  margin-top: 10px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.02);
  padding: 10px;
}


/* Winner highlight */
.winner-pill{
  background: rgba(47,229,122,.14) !important;
  border-color: rgba(47,229,122,.35) !important;
}
.team-box.winner{
  background: rgba(47,229,122,.06) !important;
  border-color: rgba(47,229,122,.22) !important;
}

/* Player rows: nicer contrast */
.player-row{ color: var(--text); }
.team-box.teamA .player-row{
  border-color: rgba(124,92,255,.22);
  background: linear-gradient(180deg, rgba(124,92,255,.10), rgba(255,255,255,.02));
}
.team-box.teamB .player-row{
  border-color: rgba(37,198,216,.18);
  background: linear-gradient(180deg, rgba(37,198,216,.08), rgba(255,255,255,.02));
}
.team-box.teamA .player-row:hover{ box-shadow: 0 0 0 4px rgba(124,92,255,.14); }
.team-box.teamB .player-row:hover{ box-shadow: 0 0 0 4px rgba(37,198,216,.12); }
.player-row b{ color: rgba(238,242,255,.98); letter-spacing:.1px; }


/* Team fill states (Nuevo Partido) */
.dropzone.underfilled{
  border-color: rgba(255,204,74,.38);
  background: rgba(255,204,74,.06);
}
.dropzone.overflow{
  border-color: rgba(255,91,117,.45);
  background: rgba(255,91,117,.10);
}
.team-status{
  margin-top: 8px;
  font-size: 12px;
  color: var(--muted);
  font-weight: 900;
}
.team-status.warn{ color: rgba(255,204,74,.95); }
.team-status.bad{ color: rgba(255,91,117,.95); }
.team-status.ok{ color: rgba(47,229,122,.92); }

/* Active team selector */
.team-select{
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:flex-start;
  flex-wrap: wrap;
}
.team-toggle{
  cursor:pointer;
  border-radius: 999px;
  padding: 8px 10px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  font-weight: 950;
}
.team-toggle.is-active{
  box-shadow: 0 0 0 4px rgba(255,255,255,.06);
}
.team-toggle.teamA.is-active{
  border-color: rgba(124,92,255,.45);
  background: rgba(124,92,255,.20);
}
.team-toggle.teamB.is-active{
  border-color: rgba(37,198,216,.40);
  background: rgba(37,198,216,.16);
}

/* Empty slots + overflow chip */
.slot-empty{
  display:inline-flex;
  align-items:center;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px dashed rgba(255,255,255,.16);
  background: rgba(255,255,255,.03);
  color: rgba(238,242,255,.55);
  font-weight: 950;
  user-select:none;
  margin: 4px 6px 4px 0;
}
.slot-over{
  border-color: rgba(255,91,117,.55) !important;
  background: rgba(255,91,117,.14) !important;
}


/* Drop back to list */
.player-list.is-over{
  outline: 2px dashed rgba(255,255,255,.28);
  outline-offset: 6px;
  background: rgba(255,255,255,.03);
}


.newmatch-right{ display:flex; flex-direction:column; gap:10px; align-self:start; }


.select option{
  background: rgba(18,21,39,.98);
  color: var(--text);
}


/* Team list layout (Nuevo Partido) */
.dropzone.teamlist{
  max-height: 520px;
  overflow-y:auto;
  overflow-x:hidden;

  display:flex;
  flex-direction:column;
  gap:8px;
  align-items:stretch;
}
.player-chip{
  width:100%;
  border-radius: 12px;
  justify-content:flex-start;
}
.player-chip .grab{
  opacity:.55;
  font-weight: 1100;
  margin-right: 8px;
}
.player-chip .pname{ flex:1; }
.slot-empty{
  width:100%;
  justify-content:space-between;
  border-radius: 12px;
}


/* Nuevo Partido: selector de equipo ocupa toda la fila */
.nm-team-select{
  grid-column: 1 / -1;
  margin-bottom: 8px;
}


/* Fix contraste select (iOS / mobile) */
select.select{
  background-color: rgba(18,21,39,.92) !important;
  color: var(--text) !important;
  -webkit-text-fill-color: var(--text) !important;
}
select.select option{
  background-color: rgba(18,21,39,.98) !important;
  color: var(--text) !important;
}


@media (max-width: 720px){
  .topbar{ padding: 10px 12px; }
  .brand-sub{ display:none; }
  .tabs{
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 6px;
  }
  .tab{ white-space: nowrap; padding: 9px 11px; font-size: 12px; }
  .main{ margin: 10px auto 70px; padding: 0 10px; }
  .card{ padding: 12px; }
  .btn{ padding: 10px 12px; }
  .btn-small{ padding: 8px 10px; }

  /* Nuevo Partido */
  .newmatch-layout{ grid-template-columns: 1fr; gap: 12px; }
  .teams-right{ grid-template-columns: 1fr; gap: 12px; }
  .nm-team-select{ margin-bottom: 4px; }
  .team-toggle{ padding: 10px 12px; }
  .player-list{ max-height: 46vh; overflow:auto; }
  .dropzone.teamlist{
  max-height: 520px;
  overflow-y:auto;
  overflow-x:hidden;
 max-height: 34vh; overflow-y:auto;
  overflow-x:hidden; }
  .input, .select{ font-size: 15px; }

  /* Partidos */
  .match-header{ flex-direction: column; align-items: stretch; gap: 10px; }
  .scoreline{ font-size: 16px; }
  .table{ display:block; overflow-x:auto; }
  .table th, .table td{ padding: 8px 8px; }

  /* Jugadores */
  .table{ border-radius: 14px; }
}


/* Prevent horizontal scroll in team lists */
.dropzone.teamlist .player-chip{
  display:flex;
  min-width:0;
}
.dropzone.teamlist .pname{
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

.btn-label{ display:inline; }

.btn-ico{ display:none; }


/* Mobile: compact headers + icon buttons */
@media (max-width: 720px){
  /* simplify background (quita tinte violeta raro en algunos móviles) */
  body::before{
    background: linear-gradient(180deg, var(--bg0), var(--bg1)) !important;
  }

  /* remove blur tint layers */
  .topbar{ backdrop-filter:none !important; background: rgba(10,14,30,.92) !important; }
  .overlay{ backdrop-filter:none !important; }

  /* Nuevo Partido top row: 2 columns + buttons row */
  .nm-topbar{
    display:grid !important;
    grid-template-columns: 1fr 1fr;
    gap: 8px !important;
    align-items:end !important;
  }
  .nm-topbar > div:nth-child(1),
  .nm-topbar > div:nth-child(2){
    min-width: 0 !important;
  }
  .nm-topbar > div:nth-child(3){
    grid-column: 1 / -1;
    justify-content:flex-end !important;
  }
  .nm-topbar .h2{ font-size: 12px; margin-bottom: 4px; }
  #matchDate, #playersPerTeam{ padding: 10px 10px; font-size: 15px; }

  /* icon buttons (Reiniciar / Guardar) */
  #btnSaveMatch, #btnResetDraft{
    padding: 10px 12px !important;
    min-width: 44px;
    justify-content:center;
    gap: 0;
  }
  #btnSaveMatch .btn-label, #btnResetDraft .btn-label{ display:none !important; }
  #btnSaveMatch .btn-ico, #btnResetDraft .btn-ico{ display:inline-flex !important; }
  #btnSaveMatch .btn-ico svg, #btnResetDraft .btn-ico svg{ display:block; }

  /* Select contrast (iOS) */
  select.select{
    background-color: rgba(18,21,39,.92) !important;
    color: var(--text) !important;
    -webkit-text-fill-color: var(--text) !important;
  }
  select.select option{
    background-color: rgba(18,21,39,.98) !important;
    color: var(--text) !important;
  }

  /* Jugadores toolbar compact */
  .players-toolbar{
    display:grid !important;
    grid-template-columns: 1fr auto;
    gap: 8px !important;
    align-items:end !important;
  }
  .players-toolbar > div:nth-child(1){ min-width:0 !important; }
  .players-toolbar > div:nth-child(2){ min-width:0 !important; }
  .players-toolbar > div:nth-child(3){
    grid-column: 1 / -1;
    min-width:0 !important;
  }
  .players-toolbar .h2{ font-size: 12px; margin-bottom: 4px; }
  #btnAddPlayer{ padding: 10px 12px; }
}

/* keep icon hidden on desktop */
@media (min-width: 721px){
  .btn-ico{ display:none !important; }
}


/* Mobile background plain (no tint / máscara rara) */
@media (max-width: 720px){
  body::before{
    background: linear-gradient(180deg, var(--bg0), var(--bg1)) !important;
  }
  .topbar{
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    background: rgba(10,14,30,.92) !important;
  }
}



/* ============================
   Partidos: video embebido
   ============================ */
.video-embed{
  margin-top: 10px;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.25);
}
.video-embed iframe{
  width: 100%;
  aspect-ratio: 16 / 9;
  display: block;
}

/* ============================
   Rankings: alineación + iconos
   ============================ */
.rank-card-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.rank-title{
  display:flex;
  align-items:center;
  gap:10px;
}
.rank-icon{
  width: 34px;
  height: 34px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius: 12px;
  background: rgba(255,255,255,.07);
  border: 1px solid rgba(255,255,255,.10);
  font-size: 18px;
}
.rank-table{
  table-layout: fixed;
}
.rank-table th:nth-child(1),
.rank-table td:nth-child(1){
  text-align:center;
}
.rank-table th:nth-child(3),
.rank-table td:nth-child(3){
  text-align:center;
}
.rank-table th:nth-child(4),
.rank-table td:nth-child(4){
  text-align:left;
}
.rank-table td:nth-child(2){
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

